# Jazz Labs 7 & 8 - Complete Setup Guide

## ğŸ‰ Setup Complete!

Your Jazz MEAN stack application with VLAN networking capabilities is now fully configured!

---

## ğŸ“‹ What Was Installed & Configured

### âœ… Lab 7 - MEAN Stack (Completed)

**System Dependencies:**
- Node.js v25.1.0 & npm v11.6.2
- MongoDB v8.2.1 (running on port 27017)
- Angular CLI (latest)
- Build tools (gcc, g++, make, python3)

**Backend (Express.js):**
- Location: `~/Jazz/backend/`
- Port: 3000
- Database: MongoDB at `mongodb://localhost:27017/jazz`
- Features:
  - User authentication (register/login with JWT)
  - Chat API integration with Jazz CLI
  - CORS enabled
  - Environment variables configured

**Frontend (Angular):**
- Location: `~/Jazz/frontend/`
- Port: 4200
- Components:
  - Login page with registration
  - Chat interface
  - Auth service for API communication
  - Routing configured

**Firewall:**
- Port 22 (SSH) - ALLOW
- Port 3000 (Backend API) - ALLOW
- Port 4200 (Frontend UI) - ALLOW

### âœ… Lab 8 - VLAN Networking (Ready to Configure)

**VLAN Tools Installed:**
- vlan package
- netplan.io
- 8021q kernel module loaded

**VLAN Configuration Scripts:**
- `configure_vlan.sh` - Interactive VLAN setup
- `discover_vms.sh` - Scan network for other Jazz VMs
- `sync_vms.sh` - Sync project to other VMs

---

## ğŸš€ Getting Started - What YOU Need to Do

### Step 1: Start Jazz Services (Lab 7)

Open **TWO** separate terminal windows:

**Terminal 1 - Backend:**
```bash
cd ~/Jazz/backend
./start.sh
```

**Terminal 2 - Frontend:**
```bash
cd ~/Jazz/frontend
./start.sh
```

**OR** use the combined startup script:
```bash
cd ~/Jazz
./start_all.sh
```

### Step 2: Test the Application

1. **Open your browser** and navigate to:
   - Frontend: `http://localhost:4200`
   - Backend API: `http://localhost:3000/api/health` (should return health status)

2. **Create an account:**
   - Click "Register" on the login page
   - Enter username, email, and password
   - Login with your credentials

3. **Use the chat interface:**
   - Type messages in the chat
   - Messages will be processed by the Jazz backend
   - Chat history is stored in MongoDB

### Step 3: Configure VLAN Networking (Lab 8)

**When you're ready to set up multi-VM networking:**

```bash
cd ~/Jazz
sudo ./configure_vlan.sh
```

**You'll be prompted for:**
- Network interface to use (e.g., ens33)
- VLAN ID (default: 10)
- Network address (e.g., 192.168.10)
- This VM's IP octet (e.g., 10 for 192.168.10.10)

**Example configuration:**
```
Interface: ens33
VLAN ID: 10
Network: 192.168.10
This VM IP: 192.168.10.10
```

### Step 4: Discover Other VMs on VLAN

After configuring VLAN on multiple VMs:

```bash
cd ~/Jazz
./discover_vms.sh 192.168.10
```

This will scan the network and show:
- Active VMs
- Jazz backend/frontend services running
- SSH availability

### Step 5: Sync Jazz to Other VMs

To copy your Jazz setup to another VM:

```bash
cd ~/Jazz
./sync_vms.sh 192.168.10.20 zach
```

**On the target VM, you'll need to:**
```bash
cd ~/Jazz/backend && npm install
cd ~/Jazz/frontend && npm install
# Configure backend/.env if needed
./start_all.sh
```

---

## ğŸ“ Project Structure

```
~/Jazz/
â”œâ”€â”€ backend/                 # Express.js backend
â”‚   â”œâ”€â”€ server.js           # Main server file
â”‚   â”œâ”€â”€ package.json        # Dependencies
â”‚   â”œâ”€â”€ .env               # Environment variables (JWT_SECRET, MongoDB URI)
â”‚   â””â”€â”€ start.sh           # Startup script
â”œâ”€â”€ frontend/               # Angular frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ login/  # Login component
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ chat/   # Chat component
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ app.routes.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ start.sh           # Startup script
â”œâ”€â”€ configure_vlan.sh      # VLAN setup script
â”œâ”€â”€ discover_vms.sh        # VM discovery tool
â”œâ”€â”€ sync_vms.sh           # VM sync tool
â””â”€â”€ start_all.sh          # Start both services
```

---

## ğŸ”§ Configuration Files

### Backend Environment (`~/Jazz/backend/.env`)
```env
MONGODB_URI=mongodb://localhost:27017/jazz
JWT_SECRET=<auto-generated-secret>
PORT=3000
NODE_ENV=development
```

**âš ï¸ IMPORTANT:** Change `JWT_SECRET` in production!

### VLAN Netplan Config (after running configure_vlan.sh)
Location: `/etc/netplan/60-jazz-vlan.yaml`

---

## ğŸ§ª Testing & Verification

### Test Backend API:
```bash
# Health check
curl http://localhost:3000/api/health

# Register user
curl -X POST http://localhost:3000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","email":"test@test.com","password":"test123"}'

# Login
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"test123"}'
```

### Test MongoDB:
```bash
mongosh
> use jazz
> db.users.find()
> db.chatlogs.find()
```

### Test VLAN (after configuration):
```bash
# Check VLAN interface
ip addr show vlan10

# Ping another VM on VLAN
ping 192.168.10.20

# Test SSH to another VM
ssh zach@192.168.10.20
```

---

## ğŸ› ï¸ Useful Commands

### Service Management:
```bash
# Check MongoDB status
sudo systemctl status mongod

# Restart MongoDB
sudo systemctl restart mongod

# Check what's running on ports
sudo lsof -i :3000  # Backend
sudo lsof -i :4200  # Frontend
sudo lsof -i :27017 # MongoDB
```

### Firewall:
```bash
# Check firewall status
sudo ufw status

# Add more ports if needed
sudo ufw allow 8080/tcp
```

### VLAN Management:
```bash
# Show VLAN interfaces
ip -d link show type vlan

# Check routing table
ip route

# View netplan configuration
sudo netplan get

# Apply netplan changes
sudo netplan apply
```

---

## ğŸ› Troubleshooting

### Backend won't start:
```bash
# Check if MongoDB is running
sudo systemctl status mongod

# Check backend logs
cd ~/Jazz/backend
npm start
```

### Frontend build errors:
```bash
cd ~/Jazz/frontend
rm -rf node_modules package-lock.json
npm install
```

### VLAN not working:
```bash
# Check if 8021q module is loaded
lsmod | grep 8021q

# Load it if missing
sudo modprobe 8021q

# Check netplan config
cat /etc/netplan/60-jazz-vlan.yaml
sudo netplan apply
```

### Port already in use:
```bash
# Find what's using the port
sudo lsof -i :3000
# Kill the process
kill -9 <PID>
```

---

## ğŸ“š Next Steps & Advanced Usage

1. **Customize the Backend:**
   - Add more API endpoints in `backend/server.js`
   - Create additional MongoDB schemas
   - Integrate with Jazz CLI tools

2. **Enhance the Frontend:**
   - Add more components
   - Improve styling
   - Add real-time chat with Socket.IO

3. **Scale with VLAN:**
   - Set up load balancing across VMs
   - Configure database replication
   - Implement session sharing

4. **Security Hardening:**
   - Change JWT_SECRET
   - Set up HTTPS with SSL certificates
   - Configure MongoDB authentication
   - Use environment-specific configs

5. **Deploy to Production:**
   - Use PM2 for process management
   - Set up nginx as reverse proxy
   - Configure automatic backups
   - Set up monitoring and logging

---

## ğŸ“ Support & Resources

- **Jazz Repository:** https://github.com/ZacheryAlexis/Jazz
- **MongoDB Docs:** https://docs.mongodb.com/
- **Angular Docs:** https://angular.io/docs
- **Express.js Docs:** https://expressjs.com/
- **Netplan Docs:** https://netplan.io/

---

## âœ… Quick Checklist

- [ ] Backend running on port 3000
- [ ] Frontend running on port 4200
- [ ] MongoDB active and accessible
- [ ] Can register and login via web UI
- [ ] Firewall configured correctly
- [ ] VLAN tools installed (for Lab 8)
- [ ] VLAN configured (optional, for multi-VM)
- [ ] Can discover other VMs (optional)
- [ ] Successfully synced to other VMs (optional)

---

## ğŸ“ Lab Completion

**Lab 7 - MEAN Stack:** âœ… Complete  
**Lab 8 - VLAN Networking:** âœ… Ready to configure

You now have a fully functional MEAN stack application with the infrastructure to support multi-VM VLAN networking!

To configure VLAN networking (Lab 8), run:
```bash
sudo ~/Jazz/configure_vlan.sh
```

**Good luck with your labs! ğŸš€ğŸµ**
