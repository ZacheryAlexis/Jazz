<!-- Jazz MEAN Stack Frontend - Chat Interface HTML Template -->

<div class="chat-container">
  <div class="chat-header">
    <div class="header-content">
      <h1>ğŸ· Jazz Chat</h1>
      <p class="user-info">Welcome, {{ username }}</p>
    </div>
    <button (click)="logout()" class="btn-logout">Sign Out</button>
  </div>

  <div class="chat-messages">
    <div *ngFor="let message of messages" [class.user-message]="message.type === 'user'" [class.assistant-message]="message.type === 'assistant'" class="message">
      <div class="message-content">
        <span *ngIf="message.type === 'user'" class="message-label">You</span>
        <span *ngIf="message.type === 'assistant'" class="message-label">Jazz</span>
        <p>{{ message.text }}</p>
        <button *ngIf="message.fullResponse" class="btn-show-details" (click)="showFull(message)">Show details</button>
      </div>
    </div>

    <div *ngIf="loading" class="message assistant-message">
      <div class="message-content">
        <span class="message-label">Jazz</span>
        <p class="loading-text">Thinking<span class="dots"><span>.</span><span>.</span><span>.</span></span>
          <small class="elapsed"> {{ elapsedSeconds }}s</small>
        </p>
      </div>
    </div>

    <div *ngIf="messages.length === 0 && !loading" class="empty-state">
      <p>ğŸ‘‹ Start a conversation with Jazz!</p>
      <p class="hint">Ask me anything - I can help with coding, writing, research, and more.</p>
    </div>
  </div>

  <div class="chat-input-area">
    <form (ngSubmit)="sendMessage()" class="input-form">
      <input 
        type="text" 
        [(ngModel)]="userMessage" 
        name="userMessage"
        placeholder="Type your message here..."
        [disabled]="loading"
        autofocus
      />
      <button 
        type="submit" 
        class="btn-send"
        [disabled]="loading || !userMessage.trim()"
      >
        {{ loading ? 'â³' : 'ğŸ“¤' }}
      </button>
    </form>
  </div>
</div>

<!-- Modal for full LLM response -->
<div class="modal-backdrop" *ngIf="modalOpen" (click)="closeModal()">
  <div class="modal" role="dialog" aria-modal="true" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Full response</h3>
      <button class="modal-close" (click)="closeModal()">Ã—</button>
    </div>
    <div class="modal-body">
      <pre class="modal-content">{{ modalContent }}</pre>
    </div>
    <div class="modal-footer">
      <button class="btn" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>
